function decimalAdjust(t,a,e){return void 0===e||0===+e?Math[t](a):(a=+a,e=+e,isNaN(a)||"number"!=typeof e||e%1!==0?0/0:0>a?-decimalAdjust(t,-a,e):(a=(""+a).split("e"),a=Math[t](+(a[0]+"e"+(a[1]?+a[1]-e:-e))),a=(""+a).split("e"),+(a[0]+"e"+(a[1]?+a[1]+e:e))))}function isNormalInteger(t){var a=Math.floor(+t);return a+""===t&&a>=0}function clearBMCanvas(){bMctx.clearRect(0,0,baseMotif.width,baseMotif.height)}function resetBZoom(){bxmin=-1,bxmax=1,bymin=-1,bymax=1,redrawBM()}function bZoom(t,a,e,n){if(!((-1e3>bxmin||bxmax>1e3||-1e3>bymin||bymax>1e3)&&e>0||.001>bxmax-bxmin&&0>e||btransx>t||t>btransx+bwidth||btransy>a||a>btransy+bheight)){n.preventDefault();var i=(t-btransx)/bwidth*(bxmax-bxmin)+bxmin,m=(bheight-a+btransy)/bheight*(bymax-bymin)+bymin;bxmin=Math.pow(zoomrate,e)*(bxmin-i)+i,bxmax=Math.pow(zoomrate,e)*(bxmax-i)+i,bymin=Math.pow(zoomrate,e)*(bymin-m)+m,bymax=Math.pow(zoomrate,e)*(bymax-m)+m}}function bLine(t,a,e,n){bMctx.strokeStyle="#FF0000",bMctx.lineWidth=2,bMctx.save(),bMctx.beginPath(),bMctx.moveTo(btransx,btransy),bMctx.lineTo(btransx+bwidth,btransy),bMctx.lineTo(btransx+bwidth,btransy+bwidth),bMctx.lineTo(btransx,btransy+bwidth),bMctx.lineTo(btransx,btransy),bMctx.clip(),bMctx.beginPath(),bMctx.moveTo(bwidth*(t-bxmin)/(bxmax-bxmin)+btransx,bheight*(1-(a-bymin)/(bymax-bymin))+btransy),bMctx.lineTo(bwidth*(e-bxmin)/(bxmax-bxmin)+btransx,bheight*(1-(n-bymin)/(bymax-bymin))+btransy),bMctx.stroke(),bMctx.lineWidth=1,bMctx.restore()}function drawBaseGrid(){bMctx.textAlign="left",bMctx.font=titleFont,bMctx.fillText("Base Curve",btransx+10,40),bMctx.font=axisFont;var t=Math.floor(Math.log10(bxmax-bxmin))-1,a=Math.pow(10,t);for(i=Math.round10(bxmin,t)+a;i<Math.round10(bxmax,t)-a/2;i+=a){var e=Math.round(mwidth*(i-bxmin)/(bxmax-bxmin))+btransx+.5,n=!1;if(bMctx.lineWidth=1,Math.abs(i)<a/100?(bMctx.strokeStyle=axesColor,bMctx.lineWidth=2):Math.abs(Math.round10(i,t)-i)<a/100?(bMctx.strokeStyle=thickLineColor,n=!0,bymax-bymin>60*a?Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%10-5)-5)>.01&&(n=!1,bMctx.strokeStyle=thinLineColor):bymax-bymin>30*a?Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%5-2.5)-2.5)>.01&&(n=!1,bMctx.strokeStyle=thinLineColor):bymax-bymin>10*a&&Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%2-1)-1)>.01&&(n=!1,bMctx.strokeStyle=thinLineColor)):bMctx.strokeStyle=thinLineColor,bMctx.beginPath(),bMctx.moveTo(e,btransy),bMctx.lineTo(e,bwidth+btransy),bMctx.stroke(),n){var m=bheight-bheight*-bymin/(bymax-bymin)+btransy;if(bheight+btransy>m&&m>btransy){var r=Math.round10(i,t)+"";bMctx.textAlign="right",bMctx.fillText(r,e-3,m+14)}}}for(i=Math.round10(bymin,t)+a;i<Math.round10(bymax,t)-a/2;i+=a){var o=Math.round10(bheight-bheight*(i-bymin)/(bymax-bymin))+btransy+.5,n=!1;if(bMctx.lineWidth=1,Math.abs(i)<a/100?(bMctx.strokeStyle=axesColor,bMctx.lineWidth=2):Math.abs(Math.round10(i,t)-i)<a/100?(bMctx.strokeStyle=thickLineColor,n=!0,bxmax-bxmin>60*a?Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%10-5)-5)>.01&&(n=!1,bMctx.strokeStyle=thinLineColor):bxmax-bxmin>30*a?Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%5-2.5)-2.5)>.01&&(n=!1,bMctx.strokeStyle=thinLineColor):bxmax-bxmin>10*a&&Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%2-1)-1)>.01&&(n=!1,bMctx.strokeStyle=thinLineColor)):bMctx.strokeStyle=thinLineColor,bMctx.beginPath(),bMctx.moveTo(btransx,o),bMctx.lineTo(btransx+bwidth,o),bMctx.stroke(),n){var s=bwidth*-bxmin/(bxmax-bxmin)+btransx;if(bwidth+btransx>s&&s>btransx){var r=Math.round10(i,t)+"";bMctx.textAlign="right",bMctx.fillText(r,s-3,o+14)}}}for(i=0;i<base.length-1;i++){var x=base[i],h=base[i+1];bLine(x[0],x[1],h[0],h[1])}}function resetMZoom(){mxmin=-.5,mxmax=1.5,mymin=-.5,mymax=1.5,redrawBM()}function mZoom(t,a,e,n){if(!((-1e3>mxmin||mxmax>1e3||-1e3>mymin||mymax>1e3)&&e>0||.001>mxmax-mxmin&&0>e||mtransx>t||t>mtransx+mwidth||mtransy>a||a>mtransy+mheight)){n.preventDefault();var i=(t-mtransx)/mwidth*(mxmax-mxmin)+mxmin,m=(mheight-a+mtransy)/mheight*(mymax-mymin)+mymin;mxmin=Math.pow(zoomrate,e)*(mxmin-i)+i,mxmax=Math.pow(zoomrate,e)*(mxmax-i)+i,mymin=Math.pow(zoomrate,e)*(mymin-m)+m,mymax=Math.pow(zoomrate,e)*(mymax-m)+m}}function mLine(t,a,e,n){bMctx.strokeStyle="#FF0000",bMctx.lineWidth=2,bMctx.save(),bMctx.beginPath(),bMctx.moveTo(mtransx,mtransy),bMctx.lineTo(mtransx+mwidth,mtransy),bMctx.lineTo(mtransx+mwidth,mtransy+mwidth),bMctx.lineTo(mtransx,mtransy+mwidth),bMctx.lineTo(mtransx,mtransy),bMctx.clip(),bMctx.beginPath(),bMctx.moveTo(mwidth*(t-mxmin)/(mxmax-mxmin)+mtransx,mheight*(1-(a-mymin)/(mymax-mymin))+mtransy),bMctx.lineTo(mwidth*(e-mxmin)/(mxmax-mxmin)+mtransx,mheight*(1-(n-mymin)/(mymax-mymin))+mtransy),bMctx.stroke(),bMctx.lineWidth=1,bMctx.restore()}function drawMotifGrid(){bMctx.textAlign="left",bMctx.font=titleFont,bMctx.fillText("Motif",mtransx+10,40),bMctx.font=axisFont;var t=Math.floor(Math.log10(mxmax-mxmin))-1,a=Math.pow(10,t);for(i=Math.round10(mxmin,t)+a;i<Math.round10(mxmax,t)-a/2;i+=a){var e=Math.round(mwidth*(i-mxmin)/(mxmax-mxmin))+mtransx+.5,n=!1;if(bMctx.lineWidth=1,Math.abs(i)<a/100?(bMctx.strokeStyle=axesColor,bMctx.lineWidth=2):Math.abs(Math.round10(i,t)-i)<a/100?(bMctx.strokeStyle=thickLineColor,n=!0,mymax-mymin>60*a&&Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%10-5)-5)>.01&&(n=!1,bMctx.strokeStyle=thinLineColor),mymax-mymin>30*a?Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%5-2.5)-2.5)>.01&&(n=!1,bMctx.strokeStyle=thinLineColor):mymax-mymin>10*a&&Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%2-1)-1)>.01&&(n=!1,bMctx.strokeStyle=thinLineColor)):bMctx.strokeStyle=thinLineColor,bMctx.beginPath(),bMctx.moveTo(e,mtransy),bMctx.lineTo(e,mwidth+mtransy),bMctx.stroke(),n){var m=mheight-mheight*-mymin/(mymax-mymin)+mtransy;if(mheight+mtransy>m&&m>mtransy){var r=Math.round10(i,t)+"";bMctx.textAlign="right",bMctx.fillText(r,e-3,m+14)}}}for(i=Math.round10(mymin,t)+a;i<Math.round10(mymax,t)-a/2;i+=a){var o=Math.round10(mheight-mheight*(i-mymin)/(mymax-mymin))+mtransy+.5,n=!1;if(bMctx.lineWidth=1,Math.abs(i)<a/100?(bMctx.strokeStyle=axesColor,bMctx.lineWidth=2):Math.abs(Math.round10(i,t)-i)<a/100?(bMctx.strokeStyle=thickLineColor,n=!0,mxmax-mxmin>60*a&&Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%10-5)-5)>.01&&(n=!1,bMctx.strokeStyle=thinLineColor),mxmax-mxmin>30*a?Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%5-2.5)-2.5)>.01&&(n=!1,bMctx.strokeStyle=thinLineColor):mxmax-mxmin>10*a&&Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%2-1)-1)>.01&&(n=!1,bMctx.strokeStyle=thinLineColor)):bMctx.strokeStyle=thinLineColor,bMctx.beginPath(),bMctx.moveTo(mtransx,o),bMctx.lineTo(mtransx+mwidth,o),bMctx.stroke(),n){var s=mwidth*-mxmin/(mxmax-mxmin)+mtransx;if(mwidth+mtransx>s&&s>mtransx){var r=Math.round10(i,t)+"";bMctx.textAlign="right",bMctx.fillText(r,s-3,o+14)}}}for(i=0;i<pattern.length-1;i++){var x=gPairs[i],h=gPairs[i+1];mLine(x[0],x[1],h[0],h[1])}}function redrawBM(){clearBMCanvas(),drawBaseGrid(),drawMotifGrid()}function clearCanvas(){ctx.clearRect(0,0,canvas.width,canvas.height)}function fLine(t,a,e,n){ctx.beginPath(),ctx.moveTo(fwidth*(t-fxmin)/(fxmax-fxmin),fheight*(1-(a-fymin)/(fymax-fymin))),ctx.lineTo(fwidth*(e-fxmin)/(fxmax-fxmin),fheight*(1-(n-fymin)/(fymax-fymin))),ctx.stroke()}function rotatePoint(t,a){var e=Math.sin(a),n=Math.cos(a);return[t[0]*n-t[1]*e,t[0]*e+t[1]*n]}function fitPattern(t,a){var e=[],n=Math.atan2(a[1]-t[1],a[0]-t[0]),i=Math.hypot(a[0]-t[0],a[1]-t[1]);for(w=0;w<pattern.length;w++){var m=pattern[w],r=rotatePoint(m,n);e.push([r[0]*i+t[0],r[1]*i+t[1]])}return e}function fRecurse(t,a,e){if(stop)return!1;if(depthlimit>t){var n=0;for(t<gcSequence.length-1||(recallFinished=!0),recallFinished||(n=gcSequence[t]),s=n;s<a.length-1;s++){var i=a[s],m=a[s+1],r=Math.hypot(m[0]-i[0],m[1]-i[1]);if(r<(fxmax-fxmin)/canvas.width)fLine(i[0],i[1],m[0],m[1]);else if(r*=2,!(i[0]>fxmax+r&&m[0]>fxmax+r||i[0]<fxmin-r&&m[0]<fxmin-r||i[1]>fymax+r&&m[1]>fymax+r||i[1]<fymin-r&&m[1]<fymin-r)){var o=e.slice(0);if(o.push(s),lastPausalDate+30<(new Date).getTime())return setTimeout(function(){lastPausalDate=(new Date).getTime(),recallFinished=!1,document.getElementById("progress").innerHTML="Rendering Time: "+(lastPausalDate-startDate+"")+" ms",gcSequence=e.slice(),fRecurse(0,base,[])},15),!1;if(fRecurse(t+1,fitPattern(i,m),o)===!1)return!1}}}else for(var s=0;s<a.length-1;s++){var i=a[s],m=a[s+1];fLine(i[0],i[1],m[0],m[1])}}function drawFractalGrid(){var t=Math.floor(Math.log10(fxmax-fxmin))-1,a=Math.pow(10,t);for(i=Math.round10(fxmin,t)+a;i<Math.round10(fxmax,t)-a/2;i+=a){var e=Math.round(fwidth*(i-fxmin)/(fxmax-fxmin))+ftransx+.5,n=!1;if(ctx.lineWidth=1,Math.abs(i)<a/100){if(ctx.strokeStyle=axesColor,ctx.lineWidth=2,!drawAxes){if(!drawGridlines)continue;ctx.strokeStyle=thickLineColor,ctx.beginPath(),ctx.moveTo(e,ftransy),ctx.lineTo(e,fwidth+ftransy),ctx.stroke();continue}}else if(Math.abs(Math.round10(i,t)-i)<a/100){if(!drawGridlines)continue;ctx.strokeStyle=thickLineColor,n=!0,fymax-fymin>60*a?Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%10-5)-5)>.01&&(n=!1,ctx.strokeStyle=thinLineColor):fymax-fymin>30*a?Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%5-2.5)-2.5)>.01&&(n=!1,ctx.strokeStyle=thinLineColor):fymax-fymin>10*a&&Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%2-1)-1)>.01&&(n=!1,ctx.strokeStyle=thinLineColor)}else ctx.strokeStyle=thinLineColor;if(ctx.beginPath(),ctx.moveTo(e,ftransy),ctx.lineTo(e,fwidth+ftransy),ctx.stroke(),n&&drawAxes){var m=fheight-fheight*-fymin/(fymax-fymin)+ftransy;if(fheight+ftransy>m&&m>ftransy){var r=Math.round10(i,t)+"";ctx.textAlign="right",ctx.fillText(r,e-3,m+14)}}}for(i=Math.round10(fymin,t)+a;i<Math.round10(fymax,t)-a/2;i+=a){var o=Math.round10(fheight-fheight*(i-fymin)/(fymax-fymin))+ftransy+.5,n=!1;if(ctx.lineWidth=1,Math.abs(i)<a/100){if(ctx.strokeStyle=axesColor,ctx.lineWidth=2,!drawAxes){if(!drawGridlines)continue;ctx.strokeStyle=thickLineColor,ctx.beginPath(),ctx.moveTo(ftransx,o),ctx.lineTo(ftransx+fwidth,o),ctx.stroke();continue}}else if(Math.abs(Math.round10(i,t)-i)<a/100){if(!drawGridlines)continue;ctx.strokeStyle=thickLineColor,n=!0,fxmax-fxmin>60*a?Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%10-5)-5)>.01&&(n=!1,ctx.strokeStyle=thinLineColor):fxmax-fxmin>30*a?Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%5-2.5)-2.5)>.01&&(n=!1,ctx.strokeStyle=thinLineColor):fxmax-fxmin>10*a&&Math.abs(Math.abs(Math.round10(Math.abs(i),t)/a%2-1)-1)>.01&&(n=!1,ctx.strokeStyle=thinLineColor)}else ctx.strokeStyle=thinLineColor;if(ctx.beginPath(),ctx.moveTo(ftransx,o),ctx.lineTo(ftransx+fwidth,o),ctx.stroke(),n&&drawAxes){var s=fwidth*-fxmin/(fxmax-fxmin)+ftransx;if(fwidth+ftransx>s&&s>ftransx){var r=Math.round10(i,t)+"";ctx.textAlign="right",ctx.fillText(r,s-3,o+14)}}}}function drawFractal(){stop=!0,recallFinished=!0,clearCanvas(),lastPausalDate=(new Date).getTime(),drawFractalGrid(),setTimeout(function(){stop=!1,ctx.strokeStyle=fractalColor,startDate=(new Date).getTime(),fRecurse(0,base,[],!1)},40)}function resetFZoom(){fxmin=-1.2,fxmax=1.2,fymin=-1.2,fymax=1.2,drawFractal()}function fZoom(t,a,e,n){if(n.preventDefault(),!((-1e3>fxmin||fxmax>1e3||-1e3>fymin||fymax>1e3)&&e>0||.001>fxmax-fxmin&&0>e||ftransx>t||t>ftransx+fwidth||ftransy>a||a>ftransy+fheight)){var i=(t-ftransx)/fwidth*(fxmax-fxmin)+fxmin,m=(fheight-a+ftransy)/fheight*(fymax-fymin)+fymin;fxmin=Math.pow(zoomrate,e)*(fxmin-i)+i,fxmax=Math.pow(zoomrate,e)*(fxmax-i)+i,fymin=Math.pow(zoomrate,e)*(fymin-m)+m,fymax=Math.pow(zoomrate,e)*(fymax-m)+m}}function updateIterations(){depthlimit=document.getElementById("iterations").value,drawFractal()}function updateColor(){var t=document.getElementById("color").value.replace(/ /g,"");/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)?(fractalColor=t,document.getElementById("color").style.backgroundColor="#FFFFFF"):document.getElementById("color").style.backgroundColor="#FF9184";try{clearTimeout(sFRT)}catch(a){}sFRT=setTimeout(drawFractal,500)}function updateDrawGrid(){drawGridlines=document.getElementById("drawGrid").checked,drawFractal()}function updateDrawAxes(){drawAxes=document.getElementById("drawAxes").checked,drawFractal()}function stopDrawing(){stop=!0}function clearSystem(t){1==t?mCanvCtx1.clearRect(0,0,512,512):2==t&&mCanvCtx2.clearRect(0,0,512,512)}function calculateSystem(t,a=1){var e=null;for(e=a?document.getElementById("sequence"+(t+"")).value.replace(/ /g,"").replace(/\(/g,"").replace(/\)/g,""):mSystem,j=0;j<e.length;j++){var n=e[j];if("F"!=n&&"f"!=n&&"+"!=n&&"-"!=n)return void(document.getElementById("sequence"+(t+"")).style.backgroundColor="#FF9184")}document.getElementById("sequence"+(t+"")).style.backgroundColor="#FFFFFF";var i=0,m=0,r=0,o=0;for(n=0;n<e.length;n++)"F"==e[n]?(i+=Math.cos(r),m+=Math.sin(r)):"+"==e[n]?r-=Math.PI/4:r+=Math.PI/4,o<Math.abs(i)&&(o=Math.abs(i)),o<Math.abs(m)&&(o=Math.abs(m));fDistance=240/o,mSystem=e}function playSystem(t){clearSystem(t),turtlex=256,turtley=256,angle=0,prevx=turtlex,prevy=turtley;var a=null;for(1==t?a=mCanvCtx1:2==t&&(a=mCanvCtx2),i=0;i<mSystem.length;i++)!function(){var e=i;setTimeout(function(){if("F"==mSystem[e])for(turtlex+=fDistance*Math.cos(angle),turtley+=fDistance*Math.sin(angle),j=0;j<30/mSystem.length;j++)!function(){var n=j,i=prevx,m=prevy,r=turtlex,o=turtley,s=i+(r-i)*(n*mSystem.length/30),x=m+(o-m)*(n*mSystem.length/30);setTimeout(function(){clearSystem(t);var n=256,i=256,m=n,r=i,o=0;for(k=0;e>k;k++)"F"==mSystem[k]?(n+=fDistance*Math.cos(o),i+=fDistance*Math.sin(o)):"+"==mSystem[k]?o-=Math.PI/4:o+=Math.PI/4,a.beginPath(),a.moveTo(Math.round(m),Math.round(r)),a.lineTo(Math.round(n),Math.round(i)),a.stroke(),m=n,r=i;a.beginPath(),a.moveTo(Math.round(n),Math.round(i)),a.lineTo(Math.round(s),Math.round(x)),a.stroke(),a.beginPath(),a.moveTo(Math.round(s),Math.round(x)),a.lineTo(Math.round(s+15*Math.cos(angle+.4-Math.PI)),Math.round(x+15*Math.sin(angle+.4-Math.PI))),a.lineTo(Math.round(s+15*Math.cos(angle-.4-Math.PI)),Math.round(x+15*Math.sin(angle-.4-Math.PI))),a.lineTo(Math.round(s),Math.round(x)),a.fillStyle="green",a.fill(),a.stroke(),a.fillStyle="black"},1e3*n/30)}();else if("+"==mSystem[e]){for(j=0;j<30/mSystem.length;j++)!function(){var n=j,i=angle-Math.PI/4*(n/Math.floor(30/mSystem.length)),m=turtlex,r=turtley;setTimeout(function(){clearSystem(t);var n=256,o=256,s=n,x=o,h=0;for(k=0;e>k;k++)"F"==mSystem[k]?(n+=fDistance*Math.cos(h),o+=fDistance*Math.sin(h)):"+"==mSystem[k]?h-=Math.PI/4:h+=Math.PI/4,a.beginPath(),a.moveTo(Math.round(s),Math.round(x)),a.lineTo(Math.round(n),Math.round(o)),a.stroke(),s=n,x=o;a.beginPath(),a.moveTo(Math.round(m),Math.round(r)),a.lineTo(Math.round(m+15*Math.cos(i+.4-Math.PI)),Math.round(r+15*Math.sin(i+.4-Math.PI))),a.lineTo(Math.round(m+15*Math.cos(i-.4-Math.PI)),Math.round(r+15*Math.sin(i-.4-Math.PI))),a.lineTo(Math.round(m),Math.round(r)),a.fillStyle="green",a.fill(),a.stroke(),a.fillStyle="black"},1e3*n/30)}();angle-=Math.PI/4}else{for(j=0;j<=30/mSystem.length;j++)!function(){var n=j,i=angle+Math.PI/4*(1*n/Math.floor(30/mSystem.length)),m=turtlex,r=turtley;setTimeout(function(){clearSystem(t);var n=256,o=256,s=n,x=o,h=0;for(k=0;e>k;k++)"F"==mSystem[k]?(n+=fDistance*Math.cos(h),o+=fDistance*Math.sin(h)):"+"==mSystem[k]?h-=Math.PI/4:h+=Math.PI/4,a.beginPath(),a.moveTo(s,x),a.lineTo(n,o),a.stroke(),s=n,x=o;a.beginPath(),a.moveTo(m,r),a.lineTo(m+15*Math.cos(i+.4-Math.PI),r+15*Math.sin(i+.4-Math.PI)),a.lineTo(m+15*Math.cos(i-.4-Math.PI),r+15*Math.sin(i-.4-Math.PI)),a.lineTo(m,r),a.fillStyle="green",a.fill(),a.stroke(),a.fillStyle="black"},1e3*n/30)}();angle+=Math.PI/4}prevx=turtlex,prevy=turtley},1e3*e/mSystem.length)}()}function updateSystem2Iters(){var t=document.getElementById("iter2").value,a="+F--F+";for(i=1;t>i;i++)a=a.replace(/F/g,"(+F--F+)");document.getElementById("sequence2").value=a.substr(0,140),mSystem=a.replace(/\(/g,"").replace(/\)/g,""),calculateSystem(2,!1)}var canvas=document.getElementById("cesaro");canvas.style.position="absolute",canvas.style.left="50%",canvas.style.transform="translate(-50%, 0)";var ctx=canvas.getContext("2d"),baseMotif=document.getElementById("base-motif"),bMctx=baseMotif.getContext("2d"),bxmin=-1,bxmax=1,bymin=-1,bymax=1,bwidth=450,bheight=450,btransx=0,btransy=62,mxmin=-.5,mxmax=1.5,mymin=-.5,mymax=1.5,mwidth=450,mheight=450,mtransx=512,mtransy=62,axesColor="rgba(0,0,0,1)",thickLineColor="rgba(0,0,0,0.5)",thinLineColor="rgba(0,0,0,0.2)",zoomrate=1.04,titleFont="20px Cambria",axisFont="14px Cambria";Math.round10||(Math.round10=function(t,a){return decimalAdjust("round",t,a)}),Math.floor10||(Math.floor10=function(t,a){return decimalAdjust("floor",t,a)}),Math.ceil10||(Math.ceil10=function(t,a){return decimalAdjust("ceil",t,a)}),String.prototype.trimLeft=function(t){return void 0===t&&(t="s"),this.replace(RegExp("^["+t+"]+"),"")},String.prototype.trimRight=function(t){return void 0===t&&(t="s"),this.replace(RegExp("["+t+"]+$"),"")},String.prototype.trim=function(t){return this.trimLeft(t).trimRight(t)};var lastX=450,lastY=450;baseMotif.onwheel=function(t){var a=t.wheelDelta?t.wheelDelta/40:t.detail?-t.detail:0;a&&(bZoom(t.offsetX,t.offsetY,a,t),mZoom(t.offsetX,t.offsetY,a,t)),redrawBM()};var bdragStartX,bdragStartY,tempbxmin,tempbymin,tempbxmax,tempbymax,mdragStartX,mdragStartY,tempmxmin,tempmymin,tempmxmax,tempmymax;baseMotif.addEventListener("mousedown",function(t){btransx>lastX||lastX>btransx+bwidth||btransy>lastY||lastY>btransy+bheight||(document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none",lastX=t.offsetX||t.pageX-baseMotif.offsetLeft,lastY=t.offsetY||t.pageY-baseMotif.offsetTop,bdragStartX=(lastX-btransx)/bwidth*(bxmax-bxmin)+bxmin,bdragStartY=(bheight-lastY+btransy)/bheight*(bymax-bymin)+bymin,tempbxmin=bxmin,tempbymin=bymin,tempbxmax=bxmax,tempbymax=bymax),mtransx>lastX||lastX>mtransx+mwidth||mtransy>lastY||lastY>mtransy+mheight||(document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none",lastX=t.offsetX||t.pageX-baseMotif.offsetLeft,lastY=t.offsetY||t.pageY-baseMotif.offsetTop,mdragStartX=(lastX-mtransx)/mwidth*(mxmax-mxmin)+mxmin,mdragStartY=(mheight-lastY+mtransy)/mheight*(mymax-mymin)+mymin,tempmxmin=mxmin,tempmymin=mymin,tempmxmax=mxmax,tempmymax=mymax)},!1),baseMotif.addEventListener("mousemove",function(t){if(lastX=t.offsetX||t.pageX-baseMotif.offsetLeft,lastY=t.offsetY||t.pageY-baseMotif.offsetTop,dragged=!0,bdragStartX){var a=(lastX-btransx)/bwidth*(tempbxmax-tempbxmin)+tempbxmin,e=(bheight-lastY+btransy)/bheight*(tempbymax-tempbymin)+tempbymin;if(-1e3>tempbxmin-a+bdragStartX||tempbxmax-a+bdragStartX>1e3||-1e3>tempbymin-e+bdragStartY||tempbymax-e+bdragStartY>1e3)return;bxmin=tempbxmin-a+bdragStartX,bymin=tempbymin-e+bdragStartY,bxmax=tempbxmax-a+bdragStartX,bymax=tempbymax-e+bdragStartY}if(mdragStartX){var a=(lastX-mtransx)/mwidth*(tempmxmax-tempmxmin)+tempmxmin,e=(mheight-lastY+mtransy)/mheight*(tempmymax-tempmymin)+tempmymin;if(-1e3>tempmxmin-a+mdragStartX||tempmxmax-a+mdragStartX>1e3||-1e3>tempmymin-e+mdragStartY||tempmymax-e+mdragStartY>1e3)return;mxmin=tempmxmin-a+mdragStartX,mymin=tempmymin-e+mdragStartY,mxmax=tempmxmax-a+mdragStartX,mymax=tempmymax-e+mdragStartY}redrawBM()},!1),baseMotif.addEventListener("mouseup",function(){bdragStartX=null,bdragStartY=null,mdragStartX=null,mdragStartY=null},!1);var pattern=[[0,0],[.5,.5],[1,0]],base=[[-.5,0],[.5,0]],depthlimit=25,fractalColor="#333333",drawGridlines=!0,drawAxes=!0,gPairs=pattern,lastPausalDate,recallFinished=!0,gcSequence=[],startDate=(new Date).getTime(),stop=!1,fxmin=-1.2,fxmax=1.2,fymin=-1.2,fymax=1.2,ftransx=0,ftransy=0,fwidth=1024,fheight=1024,sFRT=null,fdragStartX,fdragStartY,tempfxmin,tempfymin,tempfxmax,tempfymax,flastX=512,flastY=512;canvas.addEventListener("mousedown",function(t){if(!(ftransx>flastX||flastX>ftransx+fwidth||ftransy>flastY||flastY>ftransy+fheight)){try{clearTimeout(sFRT)}catch(a){}document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none",lastX=t.offsetX||t.pageX-canvas.offsetLeft,lastY=t.offsetY||t.pageY-canvas.offsetTop,fdragStartX=(flastX-ftransx)/fwidth*(fxmax-fxmin)+fxmin,fdragStartY=(fheight-flastY+ftransy)/fheight*(fymax-fymin)+fymin,tempfxmin=fxmin,tempfymin=fymin,tempfxmax=fxmax,tempfymax=fymax}},!1),canvas.addEventListener("mousemove",function(t){if(flastX=t.offsetX||t.pageX-canvas.offsetLeft,flastY=t.offsetY||t.pageY-canvas.offsetTop,fdragStartX){try{clearTimeout(sFRT)}catch(a){}var e=(flastX-ftransx)/fwidth*(tempfxmax-tempfxmin)+tempfxmin,n=(fheight-flastY+ftransy)/fheight*(tempfymax-tempfymin)+tempfymin;if(-1e3>tempfxmin-e+fdragStartX||tempfxmax-e+fdragStartX>1e3||-1e3>tempfymin-n+fdragStartY||tempfymax-n+fdragStartY>1e3)return;fxmin=tempfxmin-e+fdragStartX,fymin=tempfymin-n+fdragStartY,fxmax=tempfxmax-e+fdragStartX,fymax=tempfymax-n+fdragStartY,clearCanvas(),drawFractalGrid()}},!1),canvas.addEventListener("mouseup",function(){fdragStartX=null,fdragStartY=null,drawFractal()},!1),canvas.onwheel=function(t){var a=t.wheelDelta?t.wheelDelta/40:t.detail?-t.detail:0;if(a)if(fZoom(t.offsetX,t.offsetY,a,t),6>depthlimit)drawFractal();else{clearCanvas(),drawFractalGrid();try{clearTimeout(sFRT)}catch(e){}sFRT=setTimeout(drawFractal,10*depthlimit)}},window.onload=function(){drawFractal(),drawBaseGrid(),drawMotifGrid()};var mSystem="",turtlex=256,turtley=256,prevx,prevy,angle=0,fDistance=1,mCanv1=document.getElementById("l1"),mCanvCtx1=mCanv1.getContext("2d"),mCanv2=document.getElementById("l2"),mCanvCtx2=mCanv2.getContext("2d");
